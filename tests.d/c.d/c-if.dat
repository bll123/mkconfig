# test if

output c-if.ctest
prefix mkc
loadunit c-main
standard

setint _var_a 1
setint _var_b 1
setint _var_c 0
setint _var_d 0

setint _test_b1_ok 0
setint _test_b2_ok 0
setint _test_b3_ok 0
setint _test_b4_ok 0

# basic
if vara _setint__var_a
  setint _test_b1_ok 1
endif
if notvarc ! _setint__var_c
  setint _test_b2_ok 1
endif
if pvara ( _setint__var_a )
  setint _test_b3_ok 1
endif
if p2vara ((_setint__var_a))
  setint _test_b4_ok 1
endif

setint _test_a1_ok 0
setint _test_a2_ok 0
setint _test_a3_ok 0
setint _test_a4_ok 0
setint _test_a5_ok 0

# &&
if andab _setint__var_a && _setint__var_b
  setint _test_a1_ok 1
endif
if pandab ( _setint__var_a && _setint__var_b )
  setint _test_a2_ok 1
endif
if p2andab ( _setint__var_a && ( _setint__var_b ) )
  setint _test_a3_ok 1
endif
if p3andab (_setint__var_a&&(_setint__var_b))
  setint _test_a4_ok 1
endif
if notpac ! ( _setint__var_a && _setint__var_c )
  setint _test_a5_ok 1
endif

setint _test_o1_ok 0
setint _test_o2_ok 0
setint _test_o3_ok 0
setint _test_o4_ok 0
setint _test_o5_ok 0
setint _test_o6_ok 0

# ||
if orab _setint__var_a || _setint__var_b
  setint _test_o1_ok 1
endif
if orac _setint__var_a || _setint__var_c
  setint _test_o2_ok 1
endif
if orca _setint__var_c || _setint__var_a
  setint _test_o3_ok 1
endif
if porca ( _setint__var_c || _setint__var_a )
  setint _test_o4_ok 1
endif
if notpcd ! ( _setint__var_c || _setint__var_d )
  setint _test_o5_ok 1
endif
if notpcd2 !(_setint__var_c||_setint__var_d)
  setint _test_o6_ok 1
endif

setint _test_m1_ok 0
setint _test_m2_ok 0
setint _test_m3_ok 0
setint _test_m4_ok 0

if andaorbc (_setint__var_a && (_setint__var_b||_setint__var_d))
  setint _test_m1_ok 1
endif
if notandcorbd !(_setint__var_c && (_setint__var_b||_setint__var_d))
  setint _test_m2_ok 1
endif
if andaorbcalpha (_setint__var_a and (_setint__var_b or _setint__var_d))
  setint _test_m3_ok 1
endif
if notandcorbdalpha ! (_setint__var_c and (_setint__var_b or _setint__var_d))
  setint _test_m4_ok 1
endif

# nested
setint _test_n1_ok 1
setint _test_n2_ok 0
setint _test_n3_ok 0
setint _test_n4_ok 0
setint _test_n5_ok 0
if nvara _setint__var_a
  setint _test_n2_ok 1
  if nvarb _setint__var_b
    setint _test_n3_ok 1
    if nvarc _setint__var_c
      setint _test_n4_ok 0
    else
      setint _test_n4_ok 1
      if nvard _setint__var_d
        setint _test_n5_ok 0
      else
        setint _test_n5_ok 1
      endif
    endif
  else
    setint _test_n3_ok 0
  endif
else
  setint _test_n2_ok 0
endif
setint _test_n6_ok 1

setint _test_p1_ok 0
setint _test_p2_ok 0
setint _test_p3_ok 0
setint _test_p4_ok 0
setint _test_p5_ok 0
setint _test_p6_ok 0
setint _test_p7_ok 0

setstr _var_e abc
setstr _var_f abc def
setstr _var_g abc def ghi

# ==
if eqa == _setint__var_a 1
  setint _test_p1_ok 1
endif
# ==
if noteqa ! == _setint__var_a 0
  setint _test_p2_ok 1
endif
# ==
if eqe == _setstr__var_e abc
  setint _test_p3_ok 1
endif
# ==
if noteqe ! == _setstr__var_e def
  setint _test_p4_ok 1
endif
# ==
if quote_eqf == _setstr__var_f 'abc def'
  setint _test_p5_ok 1
endif
# ==
if quote_noteqf ! == _setstr__var_f 'abc'
  setint _test_p6_ok 1
endif
# ==
if quote_eqg == _setstr__var_g 'abc def ghi'
  setint _test_p7_ok 1
endif
