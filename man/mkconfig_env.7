.\"
.\" mkconfig_env.7
.\"
.\" Copyright 2011-2018 Brad Lanam  Walnut Creek CA USA
.\" Copyright 2020 Brad Lanam Pleasant Hill CA
.\"
.\" brad.lanam.di_at_gmail.com
.\"
.\"
.\"  Notes on terminology:
.\"    check variable - the variable name for the check.
.\"    directive - a command from the mkconfig config file.
.\"    mkconfig config file - file where mkconfig check commands are read from
.\"       not to be confused with "config.h".
.\"    output file - file to which language units output is written
.\"    cache file -
.\"    lib file - output libraries file created by mkreqlib.sh
.\"
.\" from perl manual pages...
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\"
.TH mkconfig_env 7 "17 Jan 2013"
.SH Name
mkconfig_env \- mkconfig environment units
.\" .SH Synopsis
.SH Description
The environment units create an output file that can be used
as shell script input to set your environment.
.SH Environment Units
.TP
.B env\-main
The env\-main unit creates a shell script with the exported shell variables.
.RS
.TP
\fBsource\fP <source\-file>
.RS
The source directive will source another shell script.  This is useful to
make other variables accessible when the the created shell script is
executed.
.RE
.RE
.TP
.B env-systype
The systype environment unit determines what type, revision and
architecture of the system you are running on.
.RS
.TP
\fBstandard_system\fP
.RS
Runs the 'system type', 'system rev' and 'system arch' commands.
.RE
.TP
\fBsystem\fP {type|rev|arch}
.RS
The system directive with the type, rev and arch arguments will create
the _MKCONFIG_SYSTYPE, _MKCONFIG_SYSREV, and _MKCONFIG_SYSARCH
environment variables respectively.  These
correspond to the output of uname -s, uname -r and uname -m.
On AIX, the oslevel command is used to attempt to resolve the revision
of the operating system.  On MacOS X, the revision is the kernel revision and
does not correspond to the marketing version.
.RE
.RE
.TP
.B env\-cc
.br
The cc environment unit determines basic flags needed to run the
C compiler.  Use the 'standard_cc' check.
.PP
The checks are interdependent on each other and
should be configured in the order: 32bitflags, cc, using_gcc,
using_clang, using_cplusplus.
cflags, ldflags, and libs.
.RS
.TP
\fBstandard_cc\fP
.RS
Runs the cc, using_gcc, using_gnu_ld, using_clang,
using_cplusplus and libname tests.
.RE
.TP
\fB32bitflags\fP
.RS
If used, this directive must appear before the cc, cflags, etc. commands.
It turns off use of the 'getconf' command and other 64-bit flags.
.RE
.TP
\fBlibname\fP
.RS
Sets _MKCONFIG_LIBNAME to either \fIlib\fP or \fIlib64\fP.
.RE
.TP
\fBcc\fP
.RS
Determines the C compiler being used (default cc).
Sets the CC environment variable.
.RE
.TP
\fBusing_gcc\fP
.RS
Sets the _MKCONFIG_USING_GCC environment variable to 'Y' if the gcc
compiler is being used.
.RE
.TP
\fBusing_clang\fP
.RS
Sets the _MKCONFIG_USING_CLANG environment variable to 'Y' if the clang
compiler is being used.
.RE
.TP
\fBusing_cplusplus\fP
.RS
Sets the _MKCONFIG_USING_CPLUSPLUS environment variable to 'Y' if a c++
compiler is being used.  Required.
.RE
.TP
\fBcflags\fP
.RS
Sets the CFLAGS_DEBUG, CFLAGS_OPTIMIZE, CFLAGS_INCLUDE, CFLAGS_USER,
CFLAGS_COMPILER, CFLAGS_COMPILE_ONLY, CFLAGS_APPLICATION and CFLAGS_SYSTEM
environment variable according to the 'getconf' program
and appropriate to the operating system and compiler.
.PP
The CFLAGS environment variable will populate the CFLAGS_USER environment
variable.
The CFLAGS_ALL environment variable can be used to override the c flags.
.RE
.TP
\fBaddcflag\fP compiler\-flag
.RS
Checks to see if \fIcompiler\-flag\fP is valid for the compiler and
if ok, adds it to the CFLAGS environment variable.
.RE
.TP
\fBaddconfig\fP env\-var mkconfig\-var
.RS
After a configuration or pkgconfig file is loaded,
the environment variables contained
therein can be loaded into mkconfig variables.  Typical mkconfig variables
are: \fIcflags_include\fP, \fIldflags_lib_application\fP, etc.
.RE
.TP
\fBldflags\fP
.RS
Sets the LDFLAGS_DEBUG, LDFLAGS_OPTIMIZE, LDFLAGS_USER,
LDFLAGS_COMPILER, LDFLAGS_APPLICATION and LDFLAGS_SYSTEM
environment variables according to the 'getconf' program
and appropriate to the operating system and compiler.
.PP
The LDFLAGS environment variable will populate the LDFLAGS_USER
environment variable.
The LDFLAGS_ALL environment variable can be used to override the load flags.
.RE
.TP
\fBlibs\fP
.RS
Sets the LDFLAGS_LIBS_USER, LDFLAGS_LIBS_APPLICATION and LDFLAGS_LIBS_SYSTEM
environment variable according to the 'getconf' program
and appropriate to the operating system and compiler.
.PP
The LDFLAGS_LIBS_ALL environment variable can be used to override the libraries.
.RE
.TP
\fBcflags_shared\fP
.RS
Sets the CFLAGS_SHARED environment variable for building position
independent code
as appropriate to the operating system and compiler.
.RE
.TP
\fBldflags_shared\fP
.RS
Sets the LDFLAGS_SHARED_LIBLINK environment variable for building a
shared library as appropriate to the operating system and compiler.
.RE
.TP
\fBpkg\fP {cflags|include|libs} name\-of\-package [package-path]
.RS
Use the PKG_CONFIG_PATH environment variable if the package you want to
load is in a non-standard location.  Or specify package-path in the \fIpkg\fP
directive.
.PP
With the \fIcflags\fP and \fIinclude\fP directive, adds the package's CFLAGS
to CFLAGS_APPLICATION.
.PP
With the \fIlibs\fP directive, adds the package's LDFLAGS to
LDFLAGS_LIBS_APPLICATION.
.RE
.TP
\fBshareexeclinkflag\fP
.RS
Sets the LDFLAGS_EXEC_LINK environment variable for building an executable
against shared libraries
as appropriate to the operating system and compiler.
.RE
.TP
\fBsharerunpathflag\fP
.RS
Sets the LDFLAGS_RUNPATH environment variable to the
flag for setting the shared run path
as appropriate to the operating system and compiler.
.RE
.RE
.PP
.TP
\fBextension\fP {obj|exe|shlib}
.br
The obj and exe arguments correspond to the OBJ_EXT, EXE_EXT and
SHLIB_EXT
environment variables. These variables are set to the
object file extension (.o, .obj), executable file
extension (none or .exe) or the shared library extension (.so, .sl,
.a, .dll)
per the operating system and compiler.
.RE
.TP
.B env-msgfmt
.RS
.TP
\fBcmd_msgfmt\fP
.br
Sets the XMSGFMT environment variable to the path of the
msgfmt or gmsgfmt command, if any.
.RE
.SH See Also
iffe(1) autoconf(1) dist(7) mkconfig(7) mkconfig_d(7) mkconfig_c(7)
.SH Bugs
Send bug reports to: brad.lanam.di_at_gmail.com
.SH Website
http://www.gentoo.com/di/mkconfig.html
.SH Author
This program is Copyright 2011-2012 by Brad Lanam, Walnut Creek CA
.PP
Brad Lanam, Walnut Creek, CA (brad.lanam.di_at_gmail.com)
